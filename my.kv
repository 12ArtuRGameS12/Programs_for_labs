#:import NoTransition kivy.uix.screenmanager.NoTransition


#<MyLabel@Label>:
#    text_size: [None, None]
#    text_size: self.size
#    valign: "center"
#    halign: "center"


ScreenManager:
    transition: NoTransition()

    Screen:
        name: "Home"

        BoxLayout:
            orientation: "vertical"
            padding: (50, 20)
            spacing: 5

            Button:
                text: "Настройки"
                on_press:
                    root.current = self.text
            Button:
                text: "Прямые измерения"
                on_press:
                    root.current = self.text
            Button:
                text: "МНК"
                on_press:
                    root.current = self.text
            Button:
                text: "Неравноточные измерения"
                on_press:
                    root.current = self.text
            Button:
                text: "Статистика"
                on_press:
                    root.current = self.text
            Button:
                text: "Косвенные измерения"
                on_press:
                    root.current = self.text
            Button:
                text: "Формулы exe"
                on_press:
                    root.current = self.text


    Screen:
        name: "Настройки"

        BoxLayout:
            orientation: "vertical"
            padding: (50, 20)
            spacing: 5

            Button:
                text: "Home"
                on_press:
                    root.current = self.text

            BoxLayout:
                Label:
                    text: "Debug mode"
                MyToggleButton:
                    text: "OFF"
                    text_down: "ON"
                    text_normal: "OFF"
                    on_state: app.dev = True if args[1] == "down" else False

            BoxLayout:
                Label:
                    text: "Доверительный интервал"
                BoxLayout:
                    spacing: 5
                    ToggleButton:
                        group: "interval"
                        text: "90%"
                        on_state: app.interval = 1 if args[1] == "down" else app.interval
                    ToggleButton:
                        group: "interval"
                        text: "95%"
                        state: "down"
                        on_state: app.interval = 2 if args[1] == "down" else app.interval
                    ToggleButton:
                        group: "interval"
                        text: "99%"
                        on_state: app.interval = 3 if args[1] == "down" else app.interval


    Screen:
        name: "Прямые измерения"
        BoxLayout:
            orientation: "vertical"
            padding: (50, 20)
            spacing: 5

            Button:
                text: "Home"
                on_press:
                    root.current = self.text
            MyTextInput:
                hint_text: "Данные"
                filt: {*"0123456789., "}
                id: id_pz_0
            MyTextInput:
                hint_text: "Точность прибора"
                filt: {*"0123456789.,"}
                id: id_pz_1
            MyTextInput:
                hint_text: "Результат"
                id: id_pz_2
            Button:
                text: "calc"
                on_press: app.calc1((id_pz_0.text, id_pz_1.text), id_pz_2)



    Screen:
        name: "МНК"
        BoxLayout:
            orientation: "vertical"
            padding: (50, 20)
            spacing: 5

            Button:
                text: "Home"
                on_press:
                    root.current = self.text
            MyTextInput:
                hint_text: "x"
                filt: {*"0123456789., "}
                id: id_mnk_0
            MyTextInput:
                hint_text: "y"
                filt: {*"0123456789., "}
                id: id_mnk_1

            GridLayout:
                cols: 2
                #:set cc1 1
                Label:
                    text: "y = ax + b"
                Label:
                    text: "y = ax"
                CheckBox:
                    group: "МНК"
                    active: True
                    on_active:
                        cc1 = 1 if args[1] else cc1
                CheckBox:
                    group: "МНК"
                    on_active:
                        cc1 = 2 if args[1] else cc1
            MyTextInput:
                hint_text: "Результат"
                id: id_mnk_2
            Button:
                text: "calc"
                on_press: app.calc2((id_mnk_0.text, id_mnk_1.text), cc1, id_mnk_2)


    Screen:
        name: "Неравноточные измерения"
        BoxLayout:
            orientation: "vertical"
            padding: (50, 20)
            spacing: 5

            Button:
                text: "Home"
                on_press:
                    root.current = self.text
            MyTextInput:
                hint_text: "Среднее значения"
                filt: {*"0123456789., "}
                id: id_nr_0
            MyTextInput:
                hint_text: "Погрешность значений"
                filt: {*"0123456789., "}
                id: id_nr_1
            MyTextInput:
                hint_text: "Результат"
                id: id_nr_2
            Button:
                text: "calc"
                on_press: app.calc3((id_nr_0.text, id_nr_1.text), id_nr_2)


    Screen:
        name: "Статистика"
        BoxLayout:
            orientation: "vertical"
            padding: (50, 20)
            spacing: 5

            Button:
                text: "Home"
                on_press:
                    root.current = self.text
            MyTextInput:
                hint_text: "x"
                filt: {*"0123456789., "}
                id: id_st_0
            MyTextInput:
                hint_text: "y"
                filt: {*"0123456789., "}
                id: id_st_1
            MyTextInput:
                hint_text: "Результат"
                id: id_st_2
            Button:
                text: "calc"
                on_press: app.calc4((id_st_0.text, id_st_1.text), id_st_2)


    Screen:
        name: "Косвенные измерения"
        BoxLayout:
            orientation: "vertical"
            padding: (50, 20)
            spacing: 5

            Button:
                text: "Home"
                on_press:
                    root.current = self.text
            MyTextInput:
                hint_text: "Формула"
                id: id_cs_0
            MyTextInput:
                hint_text: "Значения"
                id: id_cs_1
            MyTextInput:
                hint_text: "Результат"
                id: id_cs_2
            Button:
                text: "calc"
                on_press: app.calc5((id_cs_0.text, id_cs_1.text), id_cs_2)


    Screen:
        name: "Формулы exe"
        BoxLayout:
            orientation: "vertical"
            padding: (50, 20)
            spacing: 5

            Button:
                text: "Home"
                on_press:
                    root.current = self.text
            MyTextInput:
                hint_text: "Формула"
                id: id_fe_0
            MyTextInput:
                hint_text: "Значения"
                id: id_fe_1
            MyTextInput:
                hint_text: "Результат"
                id: id_fe_2
            Button:
                text: "calc"
                on_press: app.calc6((id_fe_0.text, id_fe_1.text), id_fe_2)
